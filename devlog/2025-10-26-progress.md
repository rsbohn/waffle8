# 2025-10-26 â€” Cal3 Integration, Web UI polish, and tooling

## Highlights
- Finalised the end-to-end CAL3 workflow: ROM loads cleanly, the program runs through the webdp8 front-end, and the printer capture shows the full calendar output without manual intervention.
- Reworked the webdp8 layout so execution controls, registers, console, printer, and ROM loader are grouped logically. Added a paste-centric ROM loader, live HALT indicator, and GET-based trace wiring to keep the UI in sync with the server routes.
- Tightened the magtape bootstrap: confirmed unit-0 auto-mount, exercised read/write paths via the web UI, and left breadcrumbs for rotating demo tapes.
- Introduced `tools/8asm.py`, a streamlined wrapper that pipes source from files or stdin through the assembler, emits S-records to stdout or disk, and optionally prints listings.

## CAL3 status
- Verified the KL8E keyboard loop by scripting CR/LF injections through `/input/keyboard`, which lets CAL3 leave the polling loop and reach the calendar formatter consistently.
- Used `tools/webdp_trace.py` to confirm the program no longer sticks at 04006 once input arrives; the loop now proceeds into the print routines without manual resets.
- Captured fresh `demo/cal3.srec` output via the line printer endpoint and archived it for regression comparisons.

## webdp8 adjustments
- Grid layout now matches the `[execution][registers] / [console][line printer] / [ROM loader]` spec, with responsive behavior maintained on narrow screens.
- The registers panel compresses to two rows (PC/LINK/AC on top, HALT/SWITCH below) and highlights HALT state in accent colors. Register refresh now reports the switch register value directly.
- Execution buttons call `/trace` via GET to avoid method mismatches; console/ROM sections are ready for repeated data entry without page reloads.

## Magtape notes
- Confirmed the auto-created writable tape directory ships with a demo ASCII reel (`magtape/demo-hello-ascii.tap`) for smoke tests.
- Documented the attach/configure flow and noted remaining validation gaps (seeking backwards and multi-unit switching) for later passes.

## Tooling
- `tools/8asm.py` mirrors the classic CLI ergonomics: `8asm.py source.asm` prints S-records, `--list` prepends a listing, and piping from stdin (`8asm.py -`) works for quick experiments.
- Error handling passes assembler diagnostics through unchanged so script users get the same context as the raw module.
